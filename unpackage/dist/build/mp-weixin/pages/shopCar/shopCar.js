(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopCar/shopCar"],{"0486":function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return c})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var c=function(){var t=this,n=t.$createElement;t._self._c},o=[]},"34ad":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){e.e("component/css/light7_min").then(function(){return resolve(e("6800"))}.bind(null,e)).catch(e.oe)},c=function(){e.e("component/css/light7_swipeout").then(function(){return resolve(e("e0cf"))}.bind(null,e)).catch(e.oe)},o=function(){e.e("component/css/light7_swiper_min").then(function(){return resolve(e("812e"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("component/css/main").then(function(){return resolve(e("1321"))}.bind(null,e)).catch(e.oe)},s=function(){e.e("component/css/jzl").then(function(){return resolve(e("676a"))}.bind(null,e)).catch(e.oe)},r=function(){e.e("component/css/page/shopCar").then(function(){return resolve(e("b580"))}.bind(null,e)).catch(e.oe)},u={components:{shopCar:r,jzl:s,main:a,light7_swiper_min:o,light7_swipeout:c,light7_min:i},data:function(){return{carList:[],chioceFlag:[],allChoiceFlag:!0,integral:0,sumMoney:0,deleFlag:!0,userId:"",id:"",chooseMove:!1}},onLoad:function(){this.getCarList()},onShow:function(){this.integral=0,this.sumMoney=0,this.getCarList()},onShareAppMessage:function(){var t=this;return{title:"智享婴品",path:"/pages/index/index?"+t.getShareUrlParams()}},methods:{getCarList:function(){var n=this,e=t.getStorageSync("user").id;t.wjw_http({url:"shoppingcart/list",data:{userId:e}}).then((function(t){if(0==t.status){var e=t.result;1==n.chooseMove?n.carList.map((function(t,n,i){e[n].flagChoice=t.flagChoice,e[n].price=(e[n].price/100).toFixed(2)})):e.map((function(t){t.flagChoice=!1,t.price=(t.price/100).toFixed(2)})),n.carList=e}})).catch((function(t){console.log(t.msg)}))},calculMoney:function(){var t=this;this.sumMoney=0,this.integral=0,this.carList.map((function(n){if(1==n.flagChoice){var e=n.buy_num*n.price,i=n.buy_num*n.points;t.sumMoney=t.sumMoney+e,t.integral=t.integral+i}})),this.$forceUpdate()},sendNum:function(n,e){var i=this,c=wx.getStorageSync("token"),o=t.getStorageSync("user").id,a=this,s=a.carList[e];t.wjw_http({url:"shoppingcart/update",data:{buy_num:n,userId:o,id:s.id,token:c}}).then((function(t){i.getCarList()}))},choice:function(t){var n=this;n.carList[t].flagChoice=1==n.carList[t].flagChoice?n.$set(n.carList[t],"flagChoice",!1):n.$set(n.carList[t],"flagChoice",!0);var e=n.carList.every((function(t){return 1==t.flagChoice}));n.allChoiceFlag=1!=e,this.calculMoney()},subtraction:function(t){var n=t;0==this.carList[n].buy_num?this.carList[n].buy_num=0:this.carList[n].buy_num-=1,this.chooseMove=!0,this.calculMoney(),this.sendNum(this.carList[n].buy_num,n)},addition:function(t){var n=t;this.carList[n].buy_num<this.carList[n].sub_event_id&&(this.carList[n].buy_num+=1),this.chooseMove=!0,this.calculMoney(),this.sendNum(this.carList[n].buy_num,n)},allChoice:function(){this.allChoiceFlag=1!=this.allChoiceFlag,0==this.allChoiceFlag?this.carList.map((function(t){t.flagChoice=!0})):this.carList.map((function(t){t.flagChoice=!1})),this.calculMoney()},editBtn:function(){this.deleFlag=1!=this.deleFlag},delement:function(){var n=this;this.carList.map((function(e){1==e.flagChoice&&t.showModal({title:"提示",content:"确定删除？",success:function(i){i.confirm?t.wjw_http({url:"shoppingcart/delete/"+e.id,type:"get"}).then((function(t){0==t.status&&n.getCarList()})):i.cancel}})}))},settleMent:function(){var n=[];wx.removeStorageSync("cartBuy"),wx.removeStorageSync("sumMoney"),wx.removeStorageSync("sunJifen");var e=this.carList.every((function(t){return 0==t.flagChoice}));0==e&&(this.carList.map((function(t,e,i){t.flagChoice&&n.push(t)})),wx.setStorageSync("cartBuy",n),wx.setStorageSync("sumMoney",this.sumMoney),wx.setStorageSync("sunJifen",this.integral),t.navigateTo({url:"/pages/confirmorder"}))}}};n.default=u}).call(this,e("543d")["default"])},"57c7":function(t,n,e){"use strict";var i=e("c579"),c=e.n(i);c.a},8051:function(t,n,e){"use strict";e.r(n);var i=e("0486"),c=e("e9b8");for(var o in c)"default"!==o&&function(t){e.d(n,t,(function(){return c[t]}))}(o);e("57c7");var a,s=e("f0c5"),r=Object(s["a"])(c["default"],i["b"],i["c"],!1,null,"fb20a31c",null,!1,i["a"],a);n["default"]=r.exports},c579:function(t,n,e){},e9b8:function(t,n,e){"use strict";e.r(n);var i=e("34ad"),c=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=c.a},f38b:function(t,n,e){"use strict";(function(t){e("a53d");i(e("66fd"));var n=i(e("8051"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])}},[["f38b","common/runtime","common/vendor"]]]);