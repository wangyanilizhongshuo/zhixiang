(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/allMyOrder"],{"18a5":function(t,e,s){"use strict";s.r(e);var a=s("a716"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},4677:function(t,e,s){"use strict";var a=s("b6f3"),i=s.n(a);i.a},"4f17":function(t,e,s){"use strict";var a;s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},n=[]},a716:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{seeMovie:!1,signalFlag:!1,signalMsg:"",seeMpvieMsg:"",types:0,noPayList:[],hasPayList:[],allLists:[],hasSendList:[],hasSureList:[],page:1,pageNum:"",cancelFlag:!1,sureReceiveFlag:!1}},onReachBottom:function(){console.log("onreacth bottom"),0==this.types?(this.page+=1,this.pageNum>=this.page&&this.getAllList(1)):1==this.types?(this.page+=1,this.pageNum>=this.page&&this.getNoPayList(1)):2==this.types?(this.page+=1,this.pageNum>=this.page&&this.getHasPayList(1)):3==this.types?(this.page+=1,this.pageNum>=this.page&&this.getSend(1)):4==this.types&&(this.page+=1,this.pageNum>=this.page&&this.getFinish(1))},onLoad:function(t){this.setData(t),wx.removeStorageSync("goodDetail"),wx.removeStorageSync("types"),0==this.types?this.getAllList(0):1==this.types?this.getNoPayList(0):2==this.types?this.getHasPayList(0):3==this.types?this.getSend(0):4==this.types&&this.getFinish(0)},methods:{jumps:function(t){0==t?(this.types=0,this.pages=1,this.getAllList(0)):1==t?(this.pages=1,this.types=1,this.getNoPayList(0)):2==t?(this.pages=1,this.types=2,this.getHasPayList(0)):3==t?(this.pages=1,this.types=3,this.getSend(0)):4==t&&(this.pages=1,this.types=4,this.getFinish(0))},jumpsOne:function(t){0==t.status&&this.noPayDetail(t,1),2==t.status&&this.noPayDetail(t,2),7==t.status&&this.noPayDetail(t,4)},getNoPayList:function(e){var s=e,a=wx.getStorageSync("user").id,i=this;t.wjw_http({url:"merorder/listByPage",data:{userId:a,page:this.page,nopay:1}}).then((function(t){if(0==t.status){i.pageNum=t.result.pages;var e=t.result.list,a=i.noPayList;i.cancelFlag||0==s?(i.noPayList=t.result.list,i.cancelFlag=!1):i.cancelFlag&&1!=s||(i.noPayList=a.concat(e))}}))},noPayDetail:function(e,s){var a=s;0==a&&(0==e.status?a=1:2==e.status?a=2:4==e.status&&(a=7)),console.log(e),wx.setStorageSync("goodDetail",e),wx.setStorageSync("types",a),t.navigateTo({url:"/pages/orderMsg/orderMsg"})},getHasPayList:function(e){var s=e,a=wx.getStorageSync("user").id,i=this;t.wjw_http({url:"merorder/listByPage",data:{userId:a,page:this.page,status:2}}).then((function(t){if(0==t.status){i.pageNum=t.result.pages;var e=t.result.list,a=i.hasPayList;1==s?i.hasPayList=a.concat(e):0==s&&(i.hasPayList=e)}})),this.$forceUpdate()},cancelOrder:function(e){var s=wx.getStorageSync("user").id,a=this;t.showModal({title:"提示",content:"确定取消此订单",success:function(i){i.confirm?t.wjw_http({url:"api/closeOrder",data:{userId:s,merOrderId:e}}).then((function(e){0==e.status?(t.showToast({title:"取消成功"}),a.cancelFlag=!0,a.getNoPayList()):(a.seeMovie=!0,a.seeMpvieMsg=e.msg,setTimeout((function(){a.seeMovie=!1}),2500))})):i.cancel&&console.log("用户点击取消")}})},continuePayOrder:function(e,s){var a=(s/100).toFixed(2);t.navigateTo({url:"/pages/shopCar/payment?orderId="+e+"&type=11&money="+a})},getAllList:function(e){var s=this,a=e,i=this,n=wx.getStorageSync("user").id;t.wjw_http({url:"merorder/listByPage",data:{userId:n,page:this.page}}).then((function(t){if(0==t.status){s.pageNum=t.result.pages;var e=t.result.list,n=i.allLists;1==a?i.allLists=n.concat(e):0==a&&(i.allLists=e)}}))},getSend:function(e){var s=e,a=wx.getStorageSync("user").id,i=this;t.wjw_http({url:"merorder/listByPage",data:{userId:a,page:this.page,status:6}}).then((function(t){if(0==t.status){i.pageNum=t.result.pages;var e=t.result.list,a=i.hasSendList;i.sureReceiveFlag||0==s?(i.hasSendList=t.result.list,i.sureReceiveFlag=!1):i.sureReceiveFlag&&1!=s||(i.hasSendList=a.concat(e))}}))},confirmReceive:function(e){var s=this,a=wx.getStorageSync("user").id;t.showModal({title:"提示",content:"是否确认收货",success:function(i){var n=this;i.confirm?t.wjw_http({url:"merorder/confirm",data:{merOrderId:e,userId:a}}).then((function(e){0==e.status?(t.showToast({title:"收货成功",duration:2e3}),s.sureReceiveFlag=!0,s.getSend()):(n.signalFlag=!0,n.signalMsg=e.msg,setTimeout((function(){n.signalFlag=!1}),2500))})).catch((function(t){console.log(t)})):i.cancel&&console.log("用户点击取消")}})},getFinish:function(e){var s=e,a=wx.getStorageSync("user").id,i=this;t.wjw_http({url:"merorder/listByPage",data:{userId:a,page:this.page,status:7}}).then((function(t){if(0==t.status){i.pageNum=t.result.pages;var e=t.result.list,a=i.hasSureList;1==s?i.hasSureList=a.concat(e):0==s&&(i.hasSureList=e),i.hasSureList.map((function(t){var e=t.subOrderModelList.every((function(t){return 1==t.is_comment}));1==e?t.canpj=!1:0==e&&(t.canpj=!0)})),console.log(i.hasSureList)}}))}}};e.default=s}).call(this,s("543d")["default"])},b6f3:function(t,e,s){},e72e:function(t,e,s){"use strict";(function(t){s("a53d");a(s("66fd"));var e=a(s("e774"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},e774:function(t,e,s){"use strict";s.r(e);var a=s("4f17"),i=s("18a5");for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s("4677");var r,o=s("f0c5"),u=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"9128359e",null,!1,a["a"],r);e["default"]=u.exports}},[["e72e","common/runtime","common/vendor"]]]);